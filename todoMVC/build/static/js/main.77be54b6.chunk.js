(this.webpackJsonptodomvc=this.webpackJsonptodomvc||[]).push([[0],{111:function(e,t,n){(function(e){e.targetUrl="http://127.0.0.1:3001/"}).call(this,n(14))},135:function(e,t,n){},145:function(e,t,n){"use strict";var a=n(39),s=n(40),o=n(42),r=n(41),i=n(1),l=n.n(i),c=(n(135),n(9)),u=(n(64),function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"deleteTask",value:function(e,t){this.props.deleteItem(e,t)}},{key:"completeTask",value:function(e,t){this.props.completeTask(e,t)}},{key:"render",value:function(){var e=this;return l.a.createElement("ul",null,this.props.data.map((function(t){return l.a.createElement("li",{className:"listItem",key:t.todoname},l.a.createElement("span",{style:{width:"100%",textAlign:"left"}},l.a.createElement(c.Checkbox,{checked:!1===t.status,onChange:e.completeTask.bind(e,t.todoname,t._id)},l.a.createElement("span",{style:{margin:20,textDecorationLine:!0===t.status?"none":"line-through",color:!0===t.status?"#1F2D3D":"#E5E9F2"}}," ",t.todoname))),l.a.createElement("span",{style:{textAlign:"right"}},l.a.createElement(c.Button,{type:"text",icon:"delete",onClick:e.deleteTask.bind(e,t.todoname,t._id)})))})))}}]),n}(i.Component));t.a=u},146:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));var a=n(28);n(111);function s(t){Object(a.a)(e.targetUrl+"todos/del",{_id:t}).then((function(e){return e.json()})).then((function(e){console.log(e),e.code})).catch((function(e){console.log(e)}))}function o(t){Object(a.a)(e.targetUrl+"todos/changeStatus",{_id:t}).then((function(e){return e.json()}))}}).call(this,n(14))},18:function(e,t,n){"use strict";var a={set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},get:function(e){return JSON.parse(localStorage.getItem(e))},remove:function(e){localStorage.removeItem(e)}};t.a=a},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(18);function s(e,t){return fetch(e,{method:"post",mode:"cors",headers:{Accept:"application/json,text/plain,*/*","Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a.a.get("token")},body:o(t)})}function o(e){var t,n="";for(t in e)n+="&"+t+"="+encodeURIComponent(e[t]);return n&&(n=n.slice(1)),n}},335:function(e,t,n){"use strict";(function(e){var a=n(96),s=n(39),o=n(40),r=n(42),i=n(41),l=n(1),c=n.n(l),u=n(9),m=(n(64),n(28)),h=n(143),d=n.n(h),f=(n(111),function(t){Object(r.a)(l,t);var n=Object(i.a)(l);function l(e){var t;return Object(s.a)(this,l),(t=n.call(this,e)).state={form:{username:"",password:"",checkPass:""},rules:{password:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801",trigger:"blur"},{min:6,message:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u5c11\u4e8e6",trigger:"blur"},{validator:function(e,n,a){""===n?a(new Error("\u8bf7\u8f93\u5165\u5bc6\u7801")):(""!==t.state.form.checkPass&&t.refs.form.validateField("checkPass"),a())}}],checkPass:[{required:!0,message:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",trigger:"blur"},{validator:function(e,n,a){""===n?a(new Error("\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801")):n!==t.state.form.password?a(new Error("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4!")):a()}}],username:[{required:!0,message:"\u8bf7\u8bbe\u7f6e\u767b\u5f55\u540d",trigger:"blur"},{min:6,message:"\u767b\u5f55\u540d\u957f\u5ea6\u4e0d\u5c11\u4e8e6",trigger:"blur"}]}},t}return Object(o.a)(l,[{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePwd",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(t){var n=this;t.preventDefault(),this.refs.form.validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(m.a)(e.targetUrl+"users/register",{username:n.state.form.username,password:d()(n.state.form.password)}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.code?n.props.history.push("/TodoList"):alert(e.message)})).catch((function(e){console.log(e)}))}))}},{key:"handleReset",value:function(e){e.preventDefault(),this.refs.form.resetFields()}},{key:"onChange",value:function(e,t){this.setState({form:Object.assign({},this.state.form,Object(a.a)({},e,t))})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("header",{className:"header"},"Register"),c.a.createElement(u.Layout.Row,{gutter:"20"},c.a.createElement(u.Layout.Col,{span:"8",offset:"8"},c.a.createElement(u.Card,null,c.a.createElement("div",{style:{margin:20}}),c.a.createElement(u.Form,{labelPosition:"left",ref:"form",model:this.state.form,rules:this.state.rules,labelWidth:"80"},c.a.createElement(u.Form.Item,{label:"\u767b\u5f55\u540d",prop:"username"},c.a.createElement(u.Input,{value:this.state.form.username,onChange:this.onChange.bind(this,"username")})),c.a.createElement(u.Form.Item,{label:"\u5bc6\u7801",prop:"password"},c.a.createElement(u.Input,{type:"password",value:this.state.form.password,onChange:this.onChange.bind(this,"password"),autoComplete:"off"})),c.a.createElement(u.Form.Item,{label:"\u786e\u8ba4\u5bc6\u7801",prop:"checkPass"},c.a.createElement(u.Input,{type:"password",value:this.state.form.checkPass,onChange:this.onChange.bind(this,"checkPass"),autoComplete:"off"})),c.a.createElement(u.Form.Item,null,c.a.createElement(u.Button,{type:"primary",onClick:this.handleSubmit.bind(this)},"\u6ce8\u518c"),c.a.createElement(u.Button,{onClick:this.handleReset.bind(this)},"\u91cd\u7f6e"),"   "))))),c.a.createElement("div",{style:{margin:20}}))}}]),l}(l.Component));t.a=f}).call(this,n(14))},336:function(e,t,n){"use strict";(function(e){var a=n(39),s=n(40),o=n(42),r=n(41),i=n(1),l=n.n(i),c=n(9),u=(n(64),n(28)),m=(n(111),n(135),function(t){Object(o.a)(i,t);var n=Object(r.a)(i);function i(e){var t;return Object(a.a)(this,i),(t=n.call(this,e)).state={usercount:0,averageopentime:0,mydate:null},t}return Object(s.a)(i,[{key:"handleSubmit",value:function(t){var n=this;t.preventDefault(),Object(u.a)(e.targetUrl,{date:this.state.mydate}).then((function(e){return e.json()})).then((function(e){n.setState({usercount:e.usercount,averageopentime:e.meanofOpenTime})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.mydate;return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"header"},"Statistic"),l.a.createElement(c.Layout.Row,{gutter:"20"},l.a.createElement(c.Layout.Col,{span:"8",offset:"8"},l.a.createElement(c.Card,{className:"box-card"},l.a.createElement(c.DatePicker,{value:t,placeholder:"\u9009\u62e9\u65e5\u671f",onChange:function(t){console.debug("DatePicker1 changed: ",t),e.setState({mydate:t})}}),l.a.createElement(c.Button,{onClick:this.handleSubmit.bind(this)},"\u67e5\u8be2"),l.a.createElement("div",{style:{margin:20}}),l.a.createElement("div",null,"\u6d3b\u52a8\u7528\u6237\u6570\u91cf\uff1a",this.state.usercount),l.a.createElement("div",null,"\u5e73\u5747\u9875\u9762\u52a0\u8f7d\u65f6\u95f4\uff1a",this.state.averageopentime,"\u6beb\u79d2")))),l.a.createElement("div",{style:{margin:20}}))}}]),i}(i.Component));t.a=m}).call(this,n(14))},341:function(e,t,n){"use strict";(function(e){var a,s=n(96),o=n(39),r=n(40),i=n(42),l=n(41),c=n(1),u=n.n(c),m=n(97),h=n(9),d=(n(64),n(28)),f=n(143),p=n.n(f),g=n(57),b=n(15),E=n(18),v=(n(111),Object(m.b)((function(e){return e.auth}),{login:g.b,offline:g.d})(a=function(t){Object(i.a)(a,t);var n=Object(l.a)(a);function a(e){var t;return Object(o.a)(this,a),(t=n.call(this,e)).state={labelPosition:"right",form:{username:"",password:""},rules:{username:[{required:!0,message:"\u8bf7\u8bbe\u7f6e\u767b\u5f55\u540d",trigger:"blur"},{min:6,message:"\u767b\u5f55\u540d\u957f\u5ea6\u4e0d\u5c11\u4e8e6",trigger:"blur"}],password:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801",trigger:"blur"},{min:6,message:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u5c11\u4e8e6",trigger:"blur"}]}},t}return Object(r.a)(a,[{key:"onPositionChange",value:function(e){this.setState({labelPosition:e})}},{key:"onChange",value:function(e,t){this.setState({form:Object.assign(this.state.form,Object(s.a)({},e,t))})}},{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePwd",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(t){var n=this;t.preventDefault(),this.refs.form.validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(d.a)(e.targetUrl+"users/login",{username:n.state.form.username,password:p()(n.state.form.password)}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.code?(E.a.set("token",e.token),n.props.login()):alert("\u8d26\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef")})).catch((function(e){console.log(e)}))}))}},{key:"render",value:function(){return u.a.createElement("div",null,this.props.isAuth||this.props.isOffline?u.a.createElement(b.a,{to:"/Dashbord"}):u.a.createElement("header",{className:"header"},"Login"),u.a.createElement(h.Layout.Row,{gutter:"20"},u.a.createElement(h.Layout.Col,{span:"8",offset:"8"},u.a.createElement(h.Card,null,u.a.createElement("div",{style:{margin:20}}),u.a.createElement(h.Form,{labelPosition:"top",ref:"form",model:this.state.form,rules:this.state.rules,labelWidth:"100",className:"demo-form-stacked"},u.a.createElement(h.Form.Item,{label:"\u767b\u5f55\u540d",prop:"username"},u.a.createElement(h.Input,{value:this.state.form.username,onChange:this.onChange.bind(this,"username")})),u.a.createElement(h.Form.Item,{label:"\u5bc6\u7801",prop:"password"},u.a.createElement(h.Input,{type:"password",value:this.state.form.password,onChange:this.onChange.bind(this,"password"),autoComplete:"off"})),u.a.createElement(h.Form.Item,{style:{textAlign:"center"}},u.a.createElement(h.Button,{onClick:this.handleSubmit.bind(this)},"\u767b\u5f55"),u.a.createElement(h.Button,{plain:!0,type:"warning",onClick:this.props.offline},"\u79bb\u7ebf\u8bbf\u95ee")))))),u.a.createElement("div",{style:{margin:20}}))}}]),a}(c.Component))||a);t.a=v}).call(this,n(14))},343:function(e,t,n){"use strict";(function(e){var a=n(209),s=n(39),o=n(40),r=n(42),i=n(41),l=n(1),c=n.n(l),u=(n(135),n(145)),m=n(18),h=n(9),d=(n(64),n(28)),f=n(146),p=(n(111),function(t){Object(r.a)(l,t);var n=Object(i.a)(l);function l(){var e;return Object(s.a)(this,l),(e=n.call(this)).state={name:"tempList",checkAll:!1,isIndeterminate:!0,notCompleteCount:0,list:[{todoname:"\u4efb\u52a11",status:!0}],inputVal:"",t1:(new Date).getTime()},e}return Object(o.a)(l,[{key:"addTask",value:function(){var t=this;this.state.inputVal&&(Object(d.a)(e.targetUrl+"todos/create",{todoname:this.state.inputVal,status:!0}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.code&&t.componentDidMount()})).catch((function(e){console.log(e)})),this.setState({list:[].concat(Object(a.a)(this.state.list),[{todoname:this.state.inputVal,status:!0}]),inputVal:""}),m.a.set("todolist",[].concat(Object(a.a)(this.state.list),[{todoname:this.state.inputVal,status:!0}])))}},{key:"handleChange",value:function(e){this.setState({inputVal:e.target.value})}},{key:"deleteItem",value:function(e,t){Object(f.b)(t);var n=[],a=this.state.notCompleteCount;this.state.list.forEach((function(t){t.todoname!==e?n.push(t):!1===t.status&&a--})),this.setState({list:n,notCompleteCount:a}),m.a.set("todolist",n),m.a.set("notCompleteCount",a)}},{key:"deleteCompleteItem",value:function(){var t=this,n=this.state.list.filter((function(e){return!0===e.status}));this.setState({list:n,notCompleteCount:0}),m.a.set("todolist",n),m.a.set("notCompleteCount",0),Object(d.a)(e.targetUrl+"todos/delteCompleted").then((function(e){return e.json()})).then((function(e){console.log(e),200===e.code&&t.componentDidMount()})).catch((function(e){console.log(e)}))}},{key:"completeTask",value:function(e,t){var n=this;Object(f.a)(t);var a=[],s=this.state.notCompleteCount;this.state.list.forEach((function(t,o){if(t.todoname===e){var r=n.state.list[o];a.push(Object.assign({},r,{status:!0!==r.status})),!1===t.status?s--:s++,n.setState({list:a,notCompleteCount:s})}else a.push(t)})),m.a.set("todolist",a),m.a.set("notCompleteCount",s)}},{key:"handleCheckAllChange",value:function(e){var t=this,n=[];this.state.list.forEach((function(a,s){if(a.status===e&&Object(f.a)(a._id),""!==a.todoname){var o=t.state.list[s];n.push(Object.assign({},o,{status:!0!==e})),t.setState({list:n,isIndeterminate:!1,checkAll:e,notCompleteCount:!0===e?n.length:0})}else n.push(a)})),m.a.set("todolist",n),m.a.set("notCompleteCount",!0===e?n.length:0)}},{key:"componentDidMount",value:function(){var t=this,n=m.a.get("todolist"),a=m.a.get("notCompleteCount");n&&this.setState({list:n,notCompleteCount:a}),Object(d.a)(e.targetUrl+"todos/todoList",{openpagetime:(new Date).getTime()-this.state.t1}).then((function(e){return e.json()})).then((function(e){var n=0;e.forEach((function(e){!1===e.status&&n++})),t.setState({list:e,notCompleteCount:n})})).catch((function(e){m.a.remove("token"),console.log(e)}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"reactTodoList"},c.a.createElement("header",{className:"header"},"todos"),c.a.createElement(h.Layout.Row,{gutter:"20"},c.a.createElement(h.Layout.Col,{span:"8",offset:"8"},c.a.createElement(h.Card,{className:"box-card",header:c.a.createElement("div",{className:"clearfix"},c.a.createElement("span",{style:{lineHeight:"36px"}},c.a.createElement(h.Checkbox,{checked:this.state.checkAll,indeterminate:this.state.isIndeterminate,onChange:this.handleCheckAllChange.bind(this)}),c.a.createElement("input",{type:"text",value:this.state.inputVal,onChange:this.handleChange.bind(this),placeholder:"\u5728\u6b64\u6dfb\u52a0\u4efb\u52a1"}),c.a.createElement("span",{style:{textAlign:"right"}},c.a.createElement(h.Button,{type:"text",icon:"plus",onClick:this.addTask.bind(this)}))))},this.state.list.length>0&&c.a.createElement("div",{className:"text item"},c.a.createElement(h.Tabs,{activeName:"1"},c.a.createElement(h.Tabs.Pane,{label:c.a.createElement("span",null,"\u5168\u90e8\u4efb\u52a1\uff08",this.state.list.length,"\uff09"),name:"1"},c.a.createElement(u.a,{data:this.state.list,deleteItem:this.deleteItem.bind(this),completeTask:this.completeTask.bind(this)})),c.a.createElement(h.Tabs.Pane,{label:c.a.createElement("span",null,"\u5df2\u5b8c\u6210\uff08",this.state.notCompleteCount,"\uff09"),name:"2"},c.a.createElement(u.a,{data:this.state.list.filter((function(e){return!1===e.status})),deleteItem:this.deleteItem.bind(this),completeTask:this.completeTask.bind(this)})),c.a.createElement(h.Tabs.Pane,{label:c.a.createElement("span",null,"\u5f85\u5b8c\u6210\uff08",this.state.list.length-this.state.notCompleteCount,"\uff09"),name:"3"},c.a.createElement(u.a,{data:this.state.list.filter((function(e){return!0===e.status})),deleteItem:this.deleteItem.bind(this),completeTask:this.completeTask.bind(this)}))),c.a.createElement("span",{style:{float:"right"}},this.state.list.filter((function(e){return!1===e.status})).length>0&&c.a.createElement(h.Button,{type:"text",icon:"delete",onClick:this.deleteCompleteItem.bind(this)},"\u5220\u9664\u5df2\u5b8c\u6210\u9879\u76ee")))),c.a.createElement("div",{className:"small"},"\u52a0\u8f7d\u672c\u9875\u8017\u65f6 "+((new Date).getTime()-this.state.t1)+" \u6beb\u79d2"))))}}]),l}(l.Component));t.a=p}).call(this,n(14))},344:function(e,t,n){e.exports=n(975)},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c}));var a=n(58),s=(n(700),{isAuth:!1,isOffline:!1});function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(console.log("auth.redux.js\u91cc\u7684 state \uff1a "+JSON.stringify(e)),console.log("auth.redux.js\u91cc\u7684 action \uff1a "+JSON.stringify(t)),t.type){case"LOGIN":return Object(a.a)(Object(a.a)({},e),{},{isAuth:!0});case"LOGOUT":return Object(a.a)(Object(a.a)({},e),{},{isAuth:!1});case"OFFLINE":return Object(a.a)(Object(a.a)({},e),{},{isOffline:!0});case"ONLINE":return Object(a.a)(Object(a.a)({},e),{},{isOffline:!1});default:return e}}function r(){return{type:"LOGIN"}}function i(){return localStorage.clear(),{type:"LOGOUT"}}function l(){return{type:"OFFLINE"}}function c(){return{type:"ONLINE"}}},603:function(e,t){},605:function(e,t){},616:function(e,t){},618:function(e,t){},645:function(e,t){},647:function(e,t){},648:function(e,t){},654:function(e,t){},656:function(e,t){},674:function(e,t){},677:function(e,t){},693:function(e,t){},696:function(e,t){},699:function(e,t,n){},975:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(13),r=n.n(o),i=n(81),l=n(333),c=n(97),u=n(9),m=(n(64),n(69)),h=n(15),d=n(335),f=n(336);n(699);function p(){return s.a.createElement("footer",null,s.a.createElement("p",null,"Created by ",s.a.createElement("a",{href:"http://github.com/longyunyun/",style:{font:"12px  Extra ,Extra ,Small",color:"#E5E9F2"}},"Longyun")))}var g,b=n(57),E=Object(i.c)({auth:b.a}),v=n(341),C=n(39),y=n(40),k=n(42),O=n(41),j=n(343),I=n(18),w=(n(135),Object(c.b)((function(e){return e.auth}),{login:b.b,logout:b.c,online:b.e})(g=function(e){Object(k.a)(n,e);var t=Object(O.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"componentWillMount",value:function(){I.a.get("token")&&this.props.login()}},{key:"render",value:function(){var e=s.a.createElement(h.a,{to:"/Login"}),t=s.a.createElement("div",{className:"App"},s.a.createElement(h.d,null,s.a.createElement(h.b,{path:"/Dashbord/",component:j.a})),s.a.createElement("div",{style:{margin:20}}),this.props.isAuth?s.a.createElement(u.Button,{onClick:this.props.logout},"\u6ce8\u9500"):null,this.props.isOffline?s.a.createElement(u.Button,{onClick:this.props.online},"\u9000\u51fa\u79bb\u7ebf\u8bbf\u95ee"):null);return this.props.isAuth||this.props.isOffline?t:e}}]),n}(a.Component))||g),S=Object(i.d)(E,Object(i.a)(l.a));r.a.render(s.a.createElement(c.a,{store:S},s.a.createElement(m.a,null,s.a.createElement(u.Menu,{theme:"dark",defaultActive:"1",className:"el-menu-demo",mode:"horizontal"},s.a.createElement(m.b,{to:"/Login"},s.a.createElement(u.Menu.Item,{index:"1"},"\u767b\u5f55")),s.a.createElement(m.b,{to:"/register"}," ",s.a.createElement(u.Menu.Item,{index:"2"},"\u6ce8\u518c")),s.a.createElement(m.b,{to:"/Dashbord"}," ",s.a.createElement(u.Menu.Item,{index:"3"},"\u4efb\u52a1\u6e05\u5355")),s.a.createElement(m.b,{to:"/Statistic"}," ",s.a.createElement(u.Menu.Item,{index:"4"},"\u4f7f\u7528\u60c5\u51b5\u7edf\u8ba1"))),s.a.createElement(h.d,null,s.a.createElement(h.b,{path:"/Statistic",component:f.a}),s.a.createElement(h.b,{path:"/register",component:d.a}),s.a.createElement(h.b,{exact:!0,path:"/Login",component:v.a}),s.a.createElement(h.b,{path:"/Dashbord",component:w}),s.a.createElement(h.a,{to:"/Dashbord"}))),s.a.createElement(p,null)),document.getElementById("root"))}},[[344,1,2]]]);
//# sourceMappingURL=main.77be54b6.chunk.js.map