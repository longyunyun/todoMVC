(this.webpackJsonptodomvc=this.webpackJsonptodomvc||[]).push([[0],{102:function(e,t,n){(function(e){e.targetUrl="http://localhost:3001/"}).call(this,n(14))},104:function(e,t,n){"use strict";var a=n(36),o=n(37),s=n(39),r=n(38),l=n(1),i=n.n(l),c=(n(141),n(8)),u=(n(55),function(e){Object(s.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"deleteTask",value:function(e,t){this.props.deleteItem(e,t)}},{key:"completeTask",value:function(e,t){this.props.completeTask(e,t)}},{key:"render",value:function(){var e=this;return i.a.createElement("ul",null,this.props.data.map((function(t){return i.a.createElement("li",{className:"listItem",key:t.todoname},i.a.createElement("span",{style:{width:"100%",textAlign:"left"}},i.a.createElement(c.Checkbox,{checked:!1===t.status,onChange:e.completeTask.bind(e,t.todoname,t._id)},i.a.createElement("span",{style:{margin:20,textDecorationLine:!0===t.status?"none":"line-through",color:!0===t.status?"#1F2D3D":"#E5E9F2"}}," ",t.todoname))),i.a.createElement("span",{style:{textAlign:"right"}},i.a.createElement(c.Button,{type:"text",icon:"delete",onClick:e.deleteTask.bind(e,t.todoname,t._id)})))})))}}]),n}(l.Component));t.a=u},141:function(e,t,n){},146:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var a=n(25);n(102);function o(t){Object(a.a)(e.targetUrl+"todos/del",{_id:t}).then((function(e){return e.json()})).then((function(e){console.log(e),e.code})).catch((function(e){console.log(e)}))}function s(t){Object(a.a)(e.targetUrl+"todos/changeStatus",{_id:t}).then((function(e){return e.json()}))}}).call(this,n(14))},16:function(e,t,n){"use strict";var a={set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},get:function(e){return JSON.parse(localStorage.getItem(e))},remove:function(e){localStorage.removeItem(e)}};t.a=a},230:function(e,t,n){"use strict";(function(e){var a=n(69),o=n(36),s=n(37),r=n(39),l=n(38),i=n(1),c=n.n(i),u=n(8),m=(n(55),n(25)),h=n(103),d=n.n(h),f=(n(102),function(t){Object(r.a)(i,t);var n=Object(l.a)(i);function i(e){var t;return Object(o.a)(this,i),(t=n.call(this,e)).state={form:{username:"",password:"",checkPass:""},rules:{password:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801",trigger:"blur"},{min:6,message:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u5c11\u4e8e6",trigger:"blur"},{validator:function(e,n,a){""===n?a(new Error("\u8bf7\u8f93\u5165\u5bc6\u7801")):(""!==t.state.form.checkPass&&t.refs.form.validateField("checkPass"),a())}}],checkPass:[{required:!0,message:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",trigger:"blur"},{validator:function(e,n,a){""===n?a(new Error("\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801")):n!==t.state.form.password?a(new Error("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4!")):a()}}],username:[{required:!0,message:"\u8bf7\u8bbe\u7f6e\u767b\u5f55\u540d",trigger:"blur"},{min:6,message:"\u767b\u5f55\u540d\u957f\u5ea6\u4e0d\u5c11\u4e8e6",trigger:"blur"}]}},t}return Object(s.a)(i,[{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePwd",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(t){var n=this;t.preventDefault(),this.refs.form.validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(m.a)(e.targetUrl+"users/register",{username:n.state.form.username,password:d()(n.state.form.password)}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.code?n.props.history.push("/TodoList"):alert(e.message)})).catch((function(e){console.log(e)}))}))}},{key:"handleReset",value:function(e){e.preventDefault(),this.refs.form.resetFields()}},{key:"onChange",value:function(e,t){this.setState({form:Object.assign({},this.state.form,Object(a.a)({},e,t))})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("header",{className:"header"},"Register"),c.a.createElement(u.Layout.Row,{gutter:"20"},c.a.createElement(u.Layout.Col,{span:"8",offset:"8"},c.a.createElement(u.Card,null,c.a.createElement("div",{style:{margin:20}}),c.a.createElement(u.Form,{labelPosition:"left",ref:"form",model:this.state.form,rules:this.state.rules,labelWidth:"80"},c.a.createElement(u.Form.Item,{label:"\u767b\u5f55\u540d",prop:"username"},c.a.createElement(u.Input,{value:this.state.form.username,onChange:this.onChange.bind(this,"username")})),c.a.createElement(u.Form.Item,{label:"\u5bc6\u7801",prop:"password"},c.a.createElement(u.Input,{type:"password",value:this.state.form.password,onChange:this.onChange.bind(this,"password"),autoComplete:"off"})),c.a.createElement(u.Form.Item,{label:"\u786e\u8ba4\u5bc6\u7801",prop:"checkPass"},c.a.createElement(u.Input,{type:"password",value:this.state.form.checkPass,onChange:this.onChange.bind(this,"checkPass"),autoComplete:"off"})),c.a.createElement(u.Form.Item,null,c.a.createElement(u.Button,{type:"primary",onClick:this.handleSubmit.bind(this)},"\u6ce8\u518c"),c.a.createElement(u.Button,{onClick:this.handleReset.bind(this)},"\u91cd\u7f6e"),"   "))))),c.a.createElement("div",{style:{margin:20}}))}}]),i}(i.Component));t.a=f}).call(this,n(14))},231:function(e,t,n){"use strict";(function(e){var a,o=n(69),s=n(36),r=n(37),l=n(39),i=n(38),c=n(1),u=n.n(c),m=n(70),h=n(8),d=(n(55),n(25)),f=n(103),p=n.n(f),g=n(58),b=n(13),E=n(16),v=(n(102),Object(m.b)((function(e){return e.auth}),{login:g.b})(a=function(t){Object(l.a)(a,t);var n=Object(i.a)(a);function a(e){var t;return Object(s.a)(this,a),(t=n.call(this,e)).state={labelPosition:"right",form:{username:"",password:""},rules:{username:[{required:!0,message:"\u8bf7\u8bbe\u7f6e\u767b\u5f55\u540d",trigger:"blur"},{min:6,message:"\u767b\u5f55\u540d\u957f\u5ea6\u4e0d\u5c11\u4e8e6",trigger:"blur"}],password:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801",trigger:"blur"},{min:6,message:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u5c11\u4e8e6",trigger:"blur"}]}},t}return Object(r.a)(a,[{key:"onPositionChange",value:function(e){this.setState({labelPosition:e})}},{key:"onChange",value:function(e,t){this.setState({form:Object.assign(this.state.form,Object(o.a)({},e,t))})}},{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePwd",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(t){var n=this;t.preventDefault(),this.refs.form.validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(d.a)(e.targetUrl+"users/login",{username:n.state.form.username,password:p()(n.state.form.password)}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.code?(E.a.set("token",e.token),n.props.login()):alert("\u8d26\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef")})).catch((function(e){console.log(e)}))}))}},{key:"render",value:function(){return u.a.createElement("div",null,this.props.isAuth?u.a.createElement(b.a,{to:"/Dashbord"}):u.a.createElement("header",{className:"header"},"Login"),u.a.createElement(h.Layout.Row,{gutter:"20"},u.a.createElement(h.Layout.Col,{span:"8",offset:"8"},u.a.createElement(h.Card,null,u.a.createElement("div",{style:{margin:20}}),u.a.createElement(h.Form,{labelPosition:"top",ref:"form",model:this.state.form,rules:this.state.rules,labelWidth:"100",className:"demo-form-stacked"},u.a.createElement(h.Form.Item,{label:"\u767b\u5f55\u540d",prop:"username"},u.a.createElement(h.Input,{value:this.state.form.username,onChange:this.onChange.bind(this,"username")})),u.a.createElement(h.Form.Item,{label:"\u5bc6\u7801",prop:"password"},u.a.createElement(h.Input,{type:"password",value:this.state.form.password,onChange:this.onChange.bind(this,"password"),autoComplete:"off"})),u.a.createElement(h.Form.Item,{style:{textAlign:"center"}},u.a.createElement(h.Button,{onClick:this.handleSubmit.bind(this)},"\u767b\u5f55")))))),u.a.createElement("div",{style:{margin:20}}))}}]),a}(c.Component))||a);t.a=v}).call(this,n(14))},233:function(e,t,n){"use strict";(function(e){var a=n(147),o=n(36),s=n(37),r=n(39),l=n(38),i=n(1),c=n.n(i),u=(n(141),n(104)),m=n(16),h=n(8),d=(n(55),n(25)),f=n(146),p=(n(102),function(t){Object(r.a)(i,t);var n=Object(l.a)(i);function i(){var e;return Object(o.a)(this,i),(e=n.call(this)).state={name:"tempList",checkAll:!1,isIndeterminate:!0,notCompleteCount:0,list:[{todoname:"\u4efb\u52a11",status:!0}],inputVal:""},e}return Object(s.a)(i,[{key:"addTask",value:function(){var t=this;this.state.inputVal&&(Object(d.a)(e.targetUrl+"todos/create",{todoname:this.state.inputVal,status:!0}).then((function(e){return e.json()})).then((function(e){console.log(e),200===e.code&&t.componentDidMount()})).catch((function(e){console.log(e)})),this.setState({list:[].concat(Object(a.a)(this.state.list),[{todoname:this.state.inputVal,status:!0}]),inputVal:""}),m.a.set("todolist",[].concat(Object(a.a)(this.state.list),[{todoname:this.state.inputVal,status:!0}])))}},{key:"handleChange",value:function(e){this.setState({inputVal:e.target.value})}},{key:"deleteItem",value:function(e,t){Object(f.b)(t);var n=[],a=this.state.notCompleteCount;this.state.list.forEach((function(t){t.todoname!==e?n.push(t):!1===t.status&&a--})),this.setState({list:n,notCompleteCount:a}),m.a.set("todolist",n),m.a.set("notCompleteCount",a)}},{key:"deleteCompleteItem",value:function(){var t=this,n=this.state.list.filter((function(e){return 0===e.status}));this.setState({list:n,notCompleteCount:0}),m.a.set("todolist",n),m.a.set("notCompleteCount",0),Object(d.a)(e.targetUrl+"todos/delteCompleted").then((function(e){return e.json()})).then((function(e){console.log(e),200===e.code&&t.componentDidMount()})).catch((function(e){console.log(e)}))}},{key:"completeTask",value:function(e,t){var n=this;Object(f.a)(t);var a=[],o=this.state.notCompleteCount;this.state.list.forEach((function(t,s){if(t.todoname===e){var r=n.state.list[s];a.push(Object.assign({},r,{status:!0!==r.status})),!1===t.status?o--:o++,n.setState({list:a,notCompleteCount:o})}else a.push(t)})),m.a.set("todolist",a),m.a.set("notCompleteCount",o)}},{key:"handleCheckAllChange",value:function(e){var t=this,n=[];this.state.list.forEach((function(a,o){if(""!==a.todoname){var s=t.state.list[o];n.push(Object.assign({},s,{status:!0!==e})),t.setState({list:n,isIndeterminate:!1,checkAll:e,notCompleteCount:!0===e?n.length:0})}else n.push(a)})),m.a.set("todolist",n),m.a.set("notCompleteCount",!0===e?n.length:0)}},{key:"componentDidMount",value:function(){var t=this,n=m.a.get("todolist"),a=m.a.get("notCompleteCount");n&&this.setState({list:n,notCompleteCount:a}),Object(d.a)(e.targetUrl+"todos/todoList").then((function(e){return e.json()})).then((function(e){var n=0;e.forEach((function(e){!1===e.status&&n++})),t.setState({list:e,notCompleteCount:n})})).catch((function(e){m.a.remove("token"),console.log(e)}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"reactTodoList"},c.a.createElement("header",{className:"header"},"todos"),c.a.createElement(h.Layout.Row,{gutter:"20"},c.a.createElement(h.Layout.Col,{span:"8",offset:"8"},c.a.createElement(h.Card,{className:"box-card",header:c.a.createElement("div",{className:"clearfix"},c.a.createElement("span",{style:{lineHeight:"36px"}},c.a.createElement(h.Checkbox,{checked:this.state.checkAll,indeterminate:this.state.isIndeterminate,onChange:this.handleCheckAllChange.bind(this)}),c.a.createElement("input",{type:"text",value:this.state.inputVal,onChange:this.handleChange.bind(this),placeholder:"\u5728\u6b64\u6dfb\u52a0\u4efb\u52a1"}),c.a.createElement("span",{style:{textAlign:"right"}},c.a.createElement(h.Button,{type:"text",icon:"plus",onClick:this.addTask.bind(this)}))))},this.state.list.length>0&&c.a.createElement("div",{className:"text item"},c.a.createElement(h.Tabs,{activeName:"1"},c.a.createElement(h.Tabs.Pane,{label:c.a.createElement("span",null,"\u5168\u90e8\u4efb\u52a1\uff08",this.state.list.length,"\uff09"),name:"1"},c.a.createElement(u.a,{data:this.state.list,deleteItem:this.deleteItem.bind(this),completeTask:this.completeTask.bind(this)})),c.a.createElement(h.Tabs.Pane,{label:c.a.createElement("span",null,"\u5df2\u5b8c\u6210\uff08",this.state.notCompleteCount,"\uff09"),name:"2"},c.a.createElement(u.a,{data:this.state.list.filter((function(e){return!1===e.status})),deleteItem:this.deleteItem.bind(this),completeTask:this.completeTask.bind(this)})),c.a.createElement(h.Tabs.Pane,{label:c.a.createElement("span",null,"\u5f85\u5b8c\u6210\uff08",this.state.list.length-this.state.notCompleteCount,"\uff09"),name:"3"},c.a.createElement(u.a,{data:this.state.list.filter((function(e){return!0===e.status})),deleteItem:this.deleteItem.bind(this),completeTask:this.completeTask.bind(this)}))),c.a.createElement("span",{style:{float:"right"}},this.state.list.filter((function(e){return!1===e.status})).length>0&&c.a.createElement(h.Button,{type:"text",icon:"delete",onClick:this.deleteCompleteItem.bind(this)},"\u5220\u9664\u5df2\u5b8c\u6210\u9879\u76ee")))))))}}]),i}(i.Component));t.a=p}).call(this,n(14))},234:function(e,t,n){e.exports=n(593)},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(16);function o(e,t){return fetch(e,{method:"post",mode:"cors",headers:{Accept:"application/json,text/plain,*/*","Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+a.a.get("token")},body:s(t)})}function s(e){var t,n="";for(t in e)n+="&"+t+"="+encodeURIComponent(e[t]);return n&&(n=n.slice(1)),n}},495:function(e,t){},497:function(e,t){},508:function(e,t){},510:function(e,t){},537:function(e,t){},539:function(e,t){},540:function(e,t){},546:function(e,t){},548:function(e,t){},566:function(e,t){},569:function(e,t){},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return l}));var a=n(85),o={isAuth:!1};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(console.log("auth.redux.js\u91cc\u7684 state \uff1a "+JSON.stringify(e)),console.log("auth.redux.js\u91cc\u7684 action \uff1a "+JSON.stringify(t)),t.type){case"LOGIN":return Object(a.a)(Object(a.a)({},e),{},{isAuth:!0});case"LOGOUT":return Object(a.a)(Object(a.a)({},e),{},{isAuth:!1});default:return e}}function r(){return{type:"LOGIN"}}function l(){return localStorage.clear(),{type:"LOGOUT"}}},585:function(e,t){},588:function(e,t){},591:function(e,t,n){},593:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),s=n(12),r=n.n(s),l=n(57),i=n(228),c=n(70),u=n(8),m=(n(55),n(59)),h=n(13),d=n(230);n(591);function f(){return o.a.createElement("footer",null,o.a.createElement("p",null,"Created by ",o.a.createElement("a",{href:"http://github.com/longyunyun/",style:{font:"12px  Extra ,Extra ,Small",color:"#E5E9F2"}},"Longyun")))}var p,g=n(58),b=Object(l.c)({auth:g.a}),E=n(231),v=n(36),C=n(37),k=n(39),y=n(38),j=n(233),O=n(16),I=(n(141),Object(c.b)((function(e){return e.auth}),{login:g.b,logout:g.c})(p=function(e){Object(k.a)(n,e);var t=Object(y.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"componentWillMount",value:function(){O.a.get("token")&&this.props.login()}},{key:"render",value:function(){var e=o.a.createElement(h.a,{to:"/Login"}),t=o.a.createElement("div",{className:"App"},o.a.createElement(h.d,null,o.a.createElement(h.b,{path:"/Dashbord/",component:j.a})),o.a.createElement("div",{style:{margin:20}}),this.props.isAuth?o.a.createElement(u.Button,{onClick:this.props.logout},"\u6ce8\u9500"):null);return this.props.isAuth?t:e}}]),n}(a.Component))||p),w=Object(l.d)(b,Object(l.a)(i.a));r.a.render(o.a.createElement(c.a,{store:w},o.a.createElement(m.a,null,o.a.createElement(u.Menu,{theme:"dark",defaultActive:"1",className:"el-menu-demo",mode:"horizontal"},o.a.createElement(m.b,{to:"/Login"},o.a.createElement(u.Menu.Item,{index:"1"},"\u767b\u5f55")),o.a.createElement(m.b,{to:"/register"}," ",o.a.createElement(u.Menu.Item,{index:"2"},"\u6ce8\u518c")),o.a.createElement(m.b,{to:"/Dashbord"}," ",o.a.createElement(u.Menu.Item,{index:"3"},"\u4efb\u52a1\u6e05\u5355"))),o.a.createElement(h.d,null,o.a.createElement(h.b,{path:"/register",component:d.a}),o.a.createElement(h.b,{exact:!0,path:"/Login",component:E.a}),o.a.createElement(h.b,{path:"/Dashbord",component:I}),o.a.createElement(h.a,{to:"/Dashbord"}))),o.a.createElement(f,null)),document.getElementById("root"))}},[[234,1,2]]]);
//# sourceMappingURL=main.7d9dfa5e.chunk.js.map